apiVersion: cloud.google.com/v1
kind: ComputeClass
metadata:
  name: high-cpu-class
spec:
  # Enable node pool auto-creation for Autopilot
  autopilot:
    enabled: true
  
  # Simplified priority rules - let Autopilot choose appropriate sizes
  priorities:
    # Prefer C3 compute-optimized machines
    - machineFamily: c3
    
    # Fallback to N2 highcpu
    - machineFamily: n2
    
    # Final fallback to E2 (Autopilot default)
    - machineFamily: e2
      spot: true
  
  # Allow Autopilot to scale with any available machine type
  whenUnsatisfiable: ScaleUpAnyway